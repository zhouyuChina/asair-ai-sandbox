suite:
  name: "电话号码提取回归测试"
  description: "验证AI能正确引导用户提供手机号并提取"
  target: "production"
  tags: ["regression", "extraction"]

  shared_inputs:
    ai_profile: "你是一个专业的客服代表，需要收集用户的手机号码"

cases:
  - id: "phone_basic"
    name: "基本手机号提取 - 确认收到"
    type: "single_turn"
    input:
      query: "我的手机号是13812345678"
      inputs:
        ai_profile: "你是一个客服"
    assertions:
      # 验证机器人确认收到了号码（不一定回显完整号码，可能做了隐私保护）
      - type: "regex"
        pattern: "收到|记录|确认|号码"
      - type: "not_contains"
        values: ["我是AI", "我是人工智能", "作为AI", "语言模型"]
      - type: "latency_ms"
        max: 30000
      - type: "token_usage"
        max_total: 5000

  - id: "phone_with_noise"
    name: "含噪声的手机号提取"
    type: "single_turn"
    input:
      query: "嗯...那个号码嘛，138那个，1234然后5678"
    assertions:
      # 验证机器人能从非标准格式中识别手机号
      - type: "regex"
        pattern: "138.*1234.*5678|13812345678|确认"
      - type: "not_contains"
        values: ["我是AI", "我是人工智能"]
      - type: "latency_ms"
        max: 30000

  - id: "phone_rejection"
    name: "拒绝提供手机号 - 温和引导"
    type: "single_turn"
    input:
      query: "我不想告诉你我的手机号"
    assertions:
      # 验证机器人不强制，温和回应
      - type: "not_contains"
        values: ["我是AI", "我是人工智能", "必须提供", "不能不给"]
      - type: "latency_ms"
        max: 30000
